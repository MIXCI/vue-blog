<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>WebComponent——custom elements | 鹏展博</title>
    <meta name="description" content="热爱前端，热爱健身，热爱生活">
    <link rel="icon" href="/g.gif">
  <meta name="keywords" content="鹏展博,前端，健身">
  <meta http-equiv="X-UA-Compatible" content="id=edg">
    
    <link rel="preload" href="/assets/css/0.styles.5b30cd91.css" as="style"><link rel="preload" href="/assets/js/app.dd150920.js" as="script"><link rel="preload" href="/assets/js/6.55a36ca9.js" as="script"><link rel="preload" href="/assets/js/4.95fb6385.js" as="script"><link rel="preload" href="/assets/js/15.2fb1a3f8.js" as="script"><link rel="preload" href="/assets/js/7.c9da92c0.js" as="script"><link rel="prefetch" href="/assets/js/1.f0e95df7.js"><link rel="prefetch" href="/assets/js/10.ef5779a0.js"><link rel="prefetch" href="/assets/js/11.9e8eec4a.js"><link rel="prefetch" href="/assets/js/12.8b96abc2.js"><link rel="prefetch" href="/assets/js/13.8359aa5b.js"><link rel="prefetch" href="/assets/js/14.809e58a6.js"><link rel="prefetch" href="/assets/js/16.dcd7b9df.js"><link rel="prefetch" href="/assets/js/17.1a7e2651.js"><link rel="prefetch" href="/assets/js/18.48fc6c64.js"><link rel="prefetch" href="/assets/js/19.7b9cb0a2.js"><link rel="prefetch" href="/assets/js/20.a7663a54.js"><link rel="prefetch" href="/assets/js/21.12db77bd.js"><link rel="prefetch" href="/assets/js/22.03ca20a0.js"><link rel="prefetch" href="/assets/js/23.a83e6603.js"><link rel="prefetch" href="/assets/js/24.bddfdb8a.js"><link rel="prefetch" href="/assets/js/25.3187bd29.js"><link rel="prefetch" href="/assets/js/26.ea21c843.js"><link rel="prefetch" href="/assets/js/27.71a58df8.js"><link rel="prefetch" href="/assets/js/28.8caedddd.js"><link rel="prefetch" href="/assets/js/29.ddeec051.js"><link rel="prefetch" href="/assets/js/30.f3067c98.js"><link rel="prefetch" href="/assets/js/31.4ebfbedf.js"><link rel="prefetch" href="/assets/js/32.d1efafc6.js"><link rel="prefetch" href="/assets/js/33.bd610ffe.js"><link rel="prefetch" href="/assets/js/34.8b265ff1.js"><link rel="prefetch" href="/assets/js/35.f55b3003.js"><link rel="prefetch" href="/assets/js/36.dddcbdbf.js"><link rel="prefetch" href="/assets/js/5.2cb996cc.js"><link rel="prefetch" href="/assets/js/8.3797390c.js"><link rel="prefetch" href="/assets/js/9.bb4845f2.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.56553db2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5b30cd91.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuperess-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link"><span></span>
          鹏展博
        </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/" class="nav-link">Home</a></li><li class="nav-item"><a href="/tag/" class="nav-link">Tags</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">鹏展博
      </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/" class="nav-link">Home</a></li><li class="mobile-nav-item"><a href="/tag/" class="nav-link">Tags</a></li></ul></div></div></div> <div class="content-wrapper"><div id="vuperess-theme-blog__post-layout"><div class="vuepress-blog-theme-content"><h3>WebComponent——custom elements</h3> <div class="ui-tags-wrapper"><span class="ui-tags-item" style="background-color:#0099CC;">
        web component
    </span></div> <div class="content__default"><p>在我们的web应用开发中，HTML标签为我们提供了基础的应用和交互，我们使用HTML标签构建了各种各样丰富的web应用。</p> <p>然而在我们开发web应用的过程中，html标签提供的语义化并不能完全满足我们的场景。虽然在HTML5标准中，也增加了不少包括<code>&lt;header&gt;</code>、<code>&lt;section&gt;</code>、<code>&lt;article&gt;</code>、<code>&lt;nav&gt;</code>、<code>&lt;container&gt;</code>、<code>&lt;footer&gt;</code>等语义化标签，但它们主要是为内容或布局添加的通用语义化标签，在实际的场景中，我们还需要使用 <code>class</code> 等一些属性或者辅助说明，声明该标签的具体语义。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>login-wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果可以这么做呢：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>login</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>login</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用更加语义化的标签，满足我们各种场景，甚至是扩展已有标签的特性。那么我们该怎么做呢？</p> <p>接下来是我们的主角： <strong><a href="http://w3c.github.io/webcomponents/spec/custom/" target="_blank" rel="noopener noreferrer">自定义元素（custom Elements）<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></strong></p> <h3 id="自定义元素"><a href="#自定义元素" class="header-anchor">#</a> 自定义元素</h3> <blockquote><p>自定义元素能够帮助web开发者创建拥有自身特性的自定义标签。</p></blockquote> <h3 id="创建自定义元素"><a href="#创建自定义元素" class="header-anchor">#</a> 创建自定义元素</h3> <p><em>创建自定义元素有两种方式，这里只讨论 <strong>DOM LEVEL 3</strong> 提供的 <code>customElements</code>，在 <strong>DOM LEVEL 2</strong> 中的 <code>document.registerElement</code> 将作为补充内容在本文最后补充。</em></p> <p><a href="http://w3c.github.io/webcomponents/spec/custom/" target="_blank" rel="noopener noreferrer">Custom Element API 规范<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 定义了<code>customElements</code>作为统一的对象管理自定义元素，并对ES6 class提供了更完善的支持。</p> <blockquote><p>规范还定义了 <code>CustomElementRegistry</code>, 并且 <code>customElements instanceof CustomElementRegistry</code>。</p></blockquote> <p>我们可以通过 <code>customElements.define()</code> 方法来注册一个custom element，该方法接受以下参数：
<code>customElements.define(tarName, class[, option])</code></p> <ul><li><code>tarName</code>: <code>DOMString</code>，用于表示所创建的元素名称。名称必须是小写字母开头，且必须包含至少一个<code>-</code>，任何不含<code>-</code>的自定义标签都会导致错误。例如<code>my-tag</code>,<code>my-list-item</code>为合法标签，<code>my_tag</code>,<code>myTag</code>都是非法的自定义标签名称；</li> <li><code>class</code>: 类对象，用于定义元素行为.</li> <li><code>option</code>: 包含 <code>extends</code> 属性的配置对象，可以指定所创建的元素继承自那个内置元素，可以继承任何内置元素；</li></ul> <p><code>customElements</code>的类对象可以通过 ES 2015的类语法定义：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">MyTag</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">&quot;my-tag&quot;</span><span class="token punctuation">,</span> MyTag<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="使用自定义元素的生命周期回调函数"><a href="#使用自定义元素的生命周期回调函数" class="header-anchor">#</a> 使用自定义元素的生命周期回调函数</h3> <p>在<code>customElements</code>的构造函数中，我们可以指定多个不同的回调函数，他们会在不同的声明周期被触发。</p> <ul><li><code>connectedCallback</code>: 元素首次插入到文档DOM时回调；</li> <li><code>discannectedCallback</code>: 元素从文档DOM中删除时回调；</li> <li><code>attributeChangedCallback</code>： 元素增加、删除、修改自身属性时回调；</li> <li><code>adoptedCallback</code>：元素被移动到新的文档时回调；</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">MyCustom</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span>
    <span class="token comment">// 自定义元素开始提升时调用</span>
    <span class="token comment">// 元素提升并不说明元素已插入到文档中</span>
    <span class="token comment">// 在此阶段尽量避免进行DOM操作</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 元素插入到文档时回调</span>
    <span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// do something...</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 元素从文档中删除时回调</span>
    <span class="token function">discannectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// do something...</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/*
     * 元素属性变化回调
     * @param name {string} 变化的属性名
     * @param oldValue {any} 变化前的值
     * @param newVlalue {any} 变化后的值
     */</span>
    <span class="token function">attributeChangedCallback</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span> newValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// do something...</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 元素被移动到新的文档中时调用</span>
    <span class="token comment">// （When it is adopted into a new document, its adoptedCallback is run.）</span>
    <span class="token comment">// 具体场景示例：通过document.adoptNode方法修改元素ownerDocument属性时可以触发</span>
    <span class="token function">adoptedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// do something...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>如果需要在元素属性发生变化后触发 <code>attributeChangedCallback</code>，就必须监听这些属性。 我们可以通过定义静态属性<code>observedAttributed</code>的 get函数来添加需要监听的属性：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">observedAttributed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="使用自定义元素"><a href="#使用自定义元素" class="header-anchor">#</a> 使用自定义元素</h3> <p>我们可以在文档的任何地方使用<code>customElements.define</code>注册的自定义元素，即使是在自定义元素注册之前。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-tag</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-tag</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>或者：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">MyTag</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">&quot;my-tag&quot;</span><span class="token punctuation">,</span> MyTag<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 方式一：</span>
<span class="token keyword">var</span> tag <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'my-tag'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 方式二：</span>
<span class="token keyword">var</span> tag <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="元素提升"><a href="#元素提升" class="header-anchor">#</a> 元素提升</h3> <p>浏览器是如何解析非标准的标签的？为什么对非标准的标签，浏览器不会报错？</p> <blockquote><p>HTML规范：<br>
非规范定义的元素必须使用 <em>HTMLUnknownElement</em> 接口。</p></blockquote> <p>我们在页面中声明一个 <code>&lt;myTag&gt;</code>标签，由于它是非标准标签，所以会继承 <code>HTMLUnknownElement</code>。</p> <p>对于自定义元素，情况有所不同。 拥有合法元素名称的自定义元素继承自<code>HTMLElement</code>。<br>
对于不支持自定义元素的浏览器，拥有合法元素名称的标签，仍然继承<code>HTMLUnknownElement</code>。</p> <h3 id="扩展内置元素特性"><a href="#扩展内置元素特性" class="header-anchor">#</a> 扩展内置元素特性</h3> <p>在创建自定义元素时，置顶所需的扩展的元素，使用时，在内置元素上声明<code>is</code>属性指定自定义元素名称：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">CustomButton</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLButtonElement</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">&quot;custom-button&quot;</span><span class="token punctuation">,</span> CustomButton<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token keyword">extends</span><span class="token punctuation">:</span> <span class="token string">'button'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">is</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>custom-button<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="自定义元素样式"><a href="#自定义元素样式" class="header-anchor">#</a> 自定义元素样式</h3> <p>自定义元素和内置元素一样，可以使用CSS各类选择器定义样式。</p> <p>自定义元素规范还提出了一个新的CSS伪类<code>:unresolved</code>。在浏览器调用你的<code>createdCallback()</code> 之前，这个伪类可以匹配到未完成元素提升的自定义元素。</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">custom-button</span><span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> opacity 300ms<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">custom-button:unresolved</span><span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>:unresolved 不能用于继承自HTMLUnkownElement的元素。</p></blockquote> <h3 id="浏览器支持"><a href="#浏览器支持" class="header-anchor">#</a> 浏览器支持</h3> <p><code>Chrome</code>和<code>Opera</code>默认支持custom elements。<code>Firefox</code>计划在60/61的版本中默认支持自定义元素。<code>Safair</code>目前不支持自定义元素对内置元素的扩展。<code>Edge</code>在实现中。</p> <h3 id="补充内容：document-registerelement"><a href="#补充内容：document-registerelement" class="header-anchor">#</a> 补充内容：<code>document.registerElement</code></h3> <p>使用<code>document.registerElement()</code> 创建自定义元素</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> MyTag <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">registerElement</span><span class="token punctuation">(</span><span class="token string">'my-tag'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>添加自定义元素特性：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> proto <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">HTMLElement</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
proto<span class="token punctuation">.</span>hello <span class="token operator">=</span> <span class="token string">'hello'</span><span class="token punctuation">;</span>
proto<span class="token punctuation">.</span><span class="token function-variable function">sayHello</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>hello<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> MyTag <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">registerElement</span><span class="token punctuation">(</span><span class="token string">'my-tag'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    prototype<span class="token punctuation">:</span> proto
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>扩展原生元素特性</p> <p><code>document.registerElement()</code> 的第二个参数还允许我们为扩展原生素的特性。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> MyButton <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">registerElement</span><span class="token punctuation">(</span><span class="token string">'my-button'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    extend<span class="token punctuation">:</span> <span class="token string">'button'</span><span class="token punctuation">,</span>
    prototpye<span class="token punctuation">:</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">HTMLButtonElement</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">is</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>my-button<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>生命周期以及回调方法</p> <ol><li>createdCallback(): 元素创建后回调。</li> <li>attachCallback(): 元素附加到文档后调用。</li> <li>detachCallback(): 元素从文档移除后调用。</li> <li>attributeChangedCallback(): 元素任意属性变化后调用。</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> myTagProto <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">HTMLElement</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>

myTagProto<span class="token punctuation">.</span><span class="token function-variable function">createdCallback</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 元素创建后回调。</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'我被创建了'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> MyTag <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">registerElement</span><span class="token punctuation">(</span><span class="token string">'my-tag'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    prototype<span class="token punctuation">:</span> myTagProto
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="结语"><a href="#结语" class="header-anchor">#</a> 结语</h3> <p>自定义元素作为 <code>webComponent</code> 规范中的一部分，为web应用开发提供了更多的可能性，配合<code>webComponent</code> 规范的其他内容，可以为web开发者提供更强大的能力。</p></div> <hr> <!----></div> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h3 active"><a href="#自定义元素" title="自定义元素">自定义元素</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#创建自定义元素" title="创建自定义元素">创建自定义元素</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#使用自定义元素的生命周期回调函数" title="使用自定义元素的生命周期回调函数">使用自定义元素的生命周期回调函数</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#使用自定义元素" title="使用自定义元素">使用自定义元素</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#元素提升" title="元素提升">元素提升</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#扩展内置元素特性" title="扩展内置元素特性">扩展内置元素特性</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#自定义元素样式" title="自定义元素样式">自定义元素样式</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#浏览器支持" title="浏览器支持">浏览器支持</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#补充内容：document-registerelement" title="补充内容：document.registerElement">补充内容：document.registerElement</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#结语" title="结语">结语</a></div></div></div></div> <footer class="footer" data-v-c27a7012><div class="footer-left-wrap" data-v-c27a7012><ul class="contact" data-v-c27a7012><li class="contact-item" data-v-c27a7012><a href="https://github.com/volodymyr-lian" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-c27a7012><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-c27a7012><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-c27a7012></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-c27a7012><ul class="copyright" data-v-c27a7012><li class="copyright-item" data-v-c27a7012><a href="https://policies.google.com/privacy?hl=en-US" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-c27a7012>Privacy Policy</a></li><li class="copyright-item" data-v-c27a7012><a href="/post/2018/08/01/webcomponent-custom-elements/" class="nav-link router-link-exact-active router-link-active" data-v-c27a7012>鹏展博</a></li></ul></div></footer></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.dd150920.js" defer></script><script src="/assets/js/6.55a36ca9.js" defer></script><script src="/assets/js/4.95fb6385.js" defer></script><script src="/assets/js/15.2fb1a3f8.js" defer></script><script src="/assets/js/7.c9da92c0.js" defer></script>
  </body>
</html>
