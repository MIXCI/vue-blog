<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.36">
    <style>
      :root {
        --c-bg: rgba(0, 0, 0, 0.15);
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <!-- <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script> -->
    <title>移动端适配方案 | 鹏展博</title><meta name="description" content="热爱生活">
    <link rel="modulepreload" href="/assets/app.87b1cd2a.js"><link rel="modulepreload" href="/assets/index.html.20446c84.js"><link rel="modulepreload" href="/assets/index.html.7bd5cdcc.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js">
    <link rel="stylesheet" href="/assets/style.3d9c7eaa.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><div class="navbar-wrapper"><div class="flex items-center"><div class="blog-title"><h3>鹏展博</h3></div></div><div class="flex items-center"><!--[--><a href="/" class="nav-link"><span>首页</span></a><a href="/category/" class="nav-link"><span>栏目</span></a><a href="/tags/" class="nav-link"><span>标签</span></a><a href="/archives/" class="nav-link"><span>归档</span></a><!--]--></div></div><!----><main class="post-wrapper"><div class="post-container"><!--[--><div class="post-meta"><h1>移动端适配方案</h1></div><div class="post-meta-profile-border post-meta-profile"><div class="post-author"><span class="inline-block mr-1"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"></path><!----><!----><!----><!----><!----></svg></span><span>pengzhanbo</span></div><div class="post-category"><span class="inline-block mr-1"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><!----><path d="M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"></path><!----><!----><!----><!----></svg></span><!--[--><!--[--><span>前端</span><span> / </span><!--]--><!--[--><span>开发</span><!----><!--]--><!--]--></div><!----><div class="post-createtime"><span class="inline-block mr-1"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><!----><!----><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path><!----><!----><!----></svg></span><span>2021-03-14</span></div></div><!--]--><main class="post-content"><!--[--><h2 id="背景" tabindex="-1"><a class="header-anchor" href="#背景" aria-hidden="true">#</a> 背景</h2><p>移动端设备由于不同品牌、不同机型，不同设备中，使用的不同浏览器，带来的一系列适配问题。在这些设备中，如何实现展示效果、交互的一致性，是比较头疼的问题。</p><h2 id="发展" tabindex="-1"><a class="header-anchor" href="#发展" aria-hidden="true">#</a> 发展</h2><p>早期的适配方案五花八门。</p><p>在2015年双十一左右， 阿里前端团队 AmFe 分享了 <code>flexiable</code> 的移动端适配方案，在往后的几年中， <code>flexiable</code>成为了主流的移动端适配方案在各大移动端应用中使用。</p><p>随着技术的发展，CSS3的<code>viewport</code>越来越得到了更多的设备支持， 逐渐的可以直接使用 viewport 来作为 移动端适配方案，2017年左右开始步入开发者的视野。</p><p>后来 AmFe 宣布 推荐使用 <code>viewport</code> 方案代替 <code>flexible</code>，<code>viewport</code>方案逐渐成为主流适配方案。</p><h2 id="lib-flexible-方案介绍" tabindex="-1"><a class="header-anchor" href="#lib-flexible-方案介绍" aria-hidden="true">#</a> lib-flexible 方案介绍</h2><h3 id="viewport" tabindex="-1"><a class="header-anchor" href="#viewport" aria-hidden="true">#</a> viewport</h3><p>viewport 即浏览器窗口，在移动端设备中，viewport太窄，为了更好的服务于CSS，提供了 <code>visual viewport</code> 和 <code>layout viewport</code></p><h3 id="物理像素-physical-pixel" tabindex="-1"><a class="header-anchor" href="#物理像素-physical-pixel" aria-hidden="true">#</a> 物理像素（physical pixel）</h3><p>物理像素即设备像素，是显示设备中最微小的物理部件。</p><h3 id="设备独立像素-density-independent-pixel" tabindex="-1"><a class="header-anchor" href="#设备独立像素-density-independent-pixel" aria-hidden="true">#</a> 设备独立像素（density-independent pixel）</h3><p>设备独立像素也称为 密度无关像素，可以认为是计算机坐标系统中的一个点，这个点代表一个可以由程序使用的虚拟像素，然后由系统转换为物理像素</p><h3 id="css像素-css-pixel" tabindex="-1"><a class="header-anchor" href="#css像素-css-pixel" aria-hidden="true">#</a> CSS像素（CSS pixel）</h3><p>css像素是一个抽象单位，主要用在浏览器上，用来精确的度量Web页面上的内容。</p><p>一般情况下， CSS像素称为设备无关的像素，简称 <code>DIPs</code></p><h3 id="屏幕密度" tabindex="-1"><a class="header-anchor" href="#屏幕密度" aria-hidden="true">#</a> 屏幕密度</h3><p>屏幕密度是指一个设备表面上存在的像素密度，它通常已每英寸有多少像素来计算（<code>PPI</code>）</p><h3 id="设备像素比-device-pixel-ratio" tabindex="-1"><a class="header-anchor" href="#设备像素比-device-pixel-ratio" aria-hidden="true">#</a> 设备像素比（device pixel ratio）</h3><p>简称 <code>DPR</code>，定义了物理像素和设备独立像素的对应关系</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>设备像素比 = 物理像素 / 设备独立像素
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="简要说明" tabindex="-1"><a class="header-anchor" href="#简要说明" aria-hidden="true">#</a> 简要说明</h3><p><code>flexiable</code> 通过hack手段，根据设备的dpr值相应改变 <code>&lt;meta&gt;</code> 标签中viewport的值：</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- dpr = 1--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>initial-scale=scale,maximum-scale=scale,minimum-scale=scale,user-scalable=no<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- dpr = 2--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>initial-scale=0.5,maximum-scale=0.5,minimum-scale=0.5,user-scalable=no<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- dpr = 3--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>initial-scale=0.3333333333,maximum-scale=0.3333333333,minimum-scale=0.3333333333,user-scalable=no<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>从而让页面达到缩放的效果，变相的实现页面的适配功能。</p><p>主要的思想：</p><ol><li>根据 <code>dpr</code>的值来修改 <code>viewport</code> 实现1px的线</li><li>根据 <code>dpr</code>的值来修改 <code>html</code>的 <code>font-size</code>，从而使用rem实现等比缩放</li><li>使用 <code>hack</code> 手段用<code>rem</code>模拟 <code>vw</code>的特性</li></ol><h3 id="使用" tabindex="-1"><a class="header-anchor" href="#使用" aria-hidden="true">#</a> 使用</h3><blockquote><p>github: <a href="https://github.com/amfe/lib-flexible" target="_blank" rel="noopener noreferrer">https://github.com/amfe/lib-flexible</a></p></blockquote><blockquote><p>px-to-rem: <a href="https://www.npmjs.com/package/postcss-pxtorem" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/package/postcss-pxtorem</a></p></blockquote><h2 id="px-to-viewport-适配方案" tabindex="-1"><a class="header-anchor" href="#px-to-viewport-适配方案" aria-hidden="true">#</a> px-to-viewport 适配方案</h2><p><code>Flexiable</code> 是通过javascript 模拟 <code>vw</code>的特性，到今天未知，<code>vw</code>已经得到了众多浏览器的支持，完全可以考虑直接将<code>vw</code>单位用于我们的适配布局中。</p><p>在css level3 中，定义了和 viewport相关的四个单位，分别是 <code>vw</code>、<code>vh</code>、<code>vmin</code>、<code>vmax</code>。</p><ul><li><code>vw</code>: viewport width 简写，1vw等于 <code>window.innerWidth</code> 的 <code>1%</code></li><li><code>vh</code>： viewport height简写，1vh 等于 <code>window.innerHeight</code> 的 <code>1%</code></li><li><code>vmin</code>：vmin的值是当前 vw和vh中较小值</li><li><code>vmax</code>： vmax的值是当前 vw和vh中较大值</li></ul><p><img src="/images/viewport.png" alt=""></p><p>在一张 750px的设计稿中， 100vw=750px， 1vw=7.5px，通过公式即可转换px单位为vw单位，实现适配。</p><p>可以通过 postcss-px-to-viewport 来帮助实现自动转换</p><blockquote><p>github: <a href="https://github.com/evrone/postcss-px-to-viewport/blob/master/README_CN.md" target="_blank" rel="noopener noreferrer">https://github.com/evrone/postcss-px-to-viewport</a></p></blockquote><h3 id="适用vw适配页面的场景" tabindex="-1"><a class="header-anchor" href="#适用vw适配页面的场景" aria-hidden="true">#</a> 适用vw适配页面的场景</h3><ol><li>容器适配</li><li>文本适配</li><li>大于1px的边框、圆角、阴影</li><li>内边距和外边距</li></ol><!--]--></main></div></main><!----></div><!--]--></div>
    <script type="module" src="/assets/app.87b1cd2a.js" defer></script>
  </body>
</html>
