<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>WebComponent——custom elements | 鹏展博</title>
    <meta name="description" content="热爱前端，热爱健身，热爱生活">
    <link rel="icon" href="/g.gif">
    
    <link rel="preload" href="/assets/css/0.styles.8b587369.css" as="style"><link rel="preload" href="/assets/js/app.3ce050ba.js" as="script"><link rel="preload" href="/assets/js/6.b5882f64.js" as="script"><link rel="prefetch" href="/assets/js/2.c444f682.js"><link rel="prefetch" href="/assets/js/3.9b0bd714.js"><link rel="prefetch" href="/assets/js/4.0f44a82e.js"><link rel="prefetch" href="/assets/js/5.1e9f6fe5.js"><link rel="prefetch" href="/assets/js/7.4e854145.js"><link rel="prefetch" href="/assets/js/8.c28f3d39.js"><link rel="prefetch" href="/assets/js/9.3cc081e1.js"><link rel="prefetch" href="/assets/js/10.542e7251.js"><link rel="prefetch" href="/assets/js/11.a907d14a.js"><link rel="prefetch" href="/assets/js/12.44231559.js"><link rel="prefetch" href="/assets/js/13.4ff9ed76.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8b587369.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/g.gif" alt="鹏展博" class="logo"> <span class="site-name can-hide">鹏展博</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/WebComponent/template.html" class="sidebar-link">WebComponent——template</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/WebComponent/HTMLImport.html" class="sidebar-link">WebComponent——HTMLImport</a></li><li><a href="/WebComponent/shadowDOM.html" class="sidebar-link">WebComponent—— shadow DOM</a></li><li><a href="/WebComponent/customElements.html" class="active sidebar-link">WebComponent——custom elements</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Jenkins.html" class="sidebar-link">Jenkins 使用</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vue组件间数据通信.html" class="sidebar-link">Vue组件间通信</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/前端的思考与杂谈.html" class="sidebar-link">前端的思考与杂谈</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/面试题以及个人答案CSS篇.html" class="sidebar-link">面试题以及个人答案 CSS篇</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/面试题以及个人答案JS篇.html" class="sidebar-link">面试题以及个人答案 JS篇</a><ul class="sidebar-sub-headers"></ul></li></ul> </div> <div class="page"> <h3 class="page-content-title">
    WebComponent——custom elements
    <small>
      create: 2018-8-1
    </small></h3> <div class="content"><p>在我们的web应用开发中，HTML标签为我们提供了基础的应用和交互，我们使用HTML标签构建了各种各样丰富的web应用。</p> <p>然而在我们开发web应用的过程中，html标签提供的语义化并不能完全满足我们的场景。虽然在HTML5标准中，也增加了不少包括<code>&lt;header&gt;</code>、<code>&lt;section&gt;</code>、<code>&lt;article&gt;</code>、<code>&lt;nav&gt;</code>、<code>&lt;container&gt;</code>、<code>&lt;footer&gt;</code>等语义化标签，但它们主要是为内容或布局添加的通用语义化标签，在实际的场景中，我们还需要使用 <code>class</code> 等一些属性或者辅助说明，声明该标签的具体语义。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>login-wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果可以这么做呢：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>login</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>login</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用更加语义化的标签，满足我们各种场景，甚至是扩展已有标签的特性。那么我们该怎么做呢？</p> <p>接下来是我们的主角： <strong><a href="http://w3c.github.io/webcomponents/spec/custom/" target="_blank" rel="noopener noreferrer">自定义元素（custom Elements）<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></strong></p> <h3 id="自定义元素"><a href="#自定义元素" aria-hidden="true" class="header-anchor">#</a> 自定义元素</h3> <blockquote><p>自定义元素能够帮助web开发者创建拥有自身特性的自定义标签。</p></blockquote> <h3 id="创建自定义元素"><a href="#创建自定义元素" aria-hidden="true" class="header-anchor">#</a> 创建自定义元素</h3> <p><em>创建自定义元素有两种方式，这里只讨论 <strong>DOM LEVEL 3</strong> 提供的 <code>customElements</code>，在 <strong>DOM LEVEL 2</strong> 中的 <code>document.registerElement</code> 将作为补充内容在本文最后补充。</em></p> <p><a href="http://w3c.github.io/webcomponents/spec/custom/" target="_blank" rel="noopener noreferrer">Custom Element API 规范<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 定义了<code>customElements</code>作为统一的对象管理自定义元素，并对ES6 class提供了更完善的支持。</p> <blockquote><p>规范还定义了 <code>CustomElementRegistry</code>, 并且 <code>customElements instanceof CustomElementRegistry</code>。</p></blockquote> <p>我们可以通过 <code>customElements.define()</code> 方法来注册一个custom element，该方法接受以下参数：
<code>customElements.define(tarName, class[, option])</code></p> <ul><li><code>tarName</code>: <code>DOMString</code>，用于表示所创建的元素名称。名称必须是小写字母开头，且必须包含至少一个<code>-</code>，任何不含<code>-</code>的自定义标签都会导致错误。例如<code>my-tag</code>,<code>my-list-item</code>为合法标签，<code>my_tag</code>,<code>myTag</code>都是非法的自定义标签名称；</li> <li><code>class</code>: 类对象，用于定义元素行为.</li> <li><code>option</code>: 包含 <code>extends</code> 属性的配置对象，可以指定所创建的元素继承自那个内置元素，可以继承任何内置元素；</li></ul> <p><code>customElements</code>的类对象可以通过 ES 2015的类语法定义：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">MyTag</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">&quot;my-tag&quot;</span><span class="token punctuation">,</span> MyTag<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="使用自定义元素的生命周期回调函数"><a href="#使用自定义元素的生命周期回调函数" aria-hidden="true" class="header-anchor">#</a> 使用自定义元素的生命周期回调函数</h3> <p>在<code>customElements</code>的构造函数中，我们可以指定多个不同的回调函数，他们会在不同的声明周期被触发。</p> <ul><li><code>connectedCallback</code>: 元素首次插入到文档DOM时回调；</li> <li><code>discannectedCallback</code>: 元素从文档DOM中删除时回调；</li> <li><code>attributeChangedCallback</code>： 元素增加、删除、修改自身属性时回调；</li> <li><code>adoptedCallback</code>：元素被移动到新的文档时回调；</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">MyCustom</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span>
    <span class="token comment">// 自定义元素开始提升时调用</span>
    <span class="token comment">// 元素提升并不说明元素已插入到文档中</span>
    <span class="token comment">// 在此阶段尽量避免进行DOM操作</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 元素插入到文档时回调</span>
    <span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// do something...</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 元素从文档中删除时回调</span>
    <span class="token function">discannectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// do something...</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/*
     * 元素属性变化回调
     * @param name {string} 变化的属性名
     * @param oldValue {any} 变化前的值
     * @param newVlalue {any} 变化后的值
     */</span>
    <span class="token function">attributeChangedCallback</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span> newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// do something...</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 元素被移动到新的文档中时调用</span>
    <span class="token comment">// （When it is adopted into a new document, its adoptedCallback is run.）</span>
    <span class="token comment">// 具体场景示例：通过document.adoptNode方法修改元素ownerDocument属性时可以触发</span>
    <span class="token function">adoptedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// do something...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>如果需要在元素属性发生变化后触发 <code>attributeChangedCallback</code>，就必须监听这些属性。 我们可以通过定义静态属性<code>observedAttributed</code>的 get函数来添加需要监听的属性：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">observedAttributed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="使用自定义元素"><a href="#使用自定义元素" aria-hidden="true" class="header-anchor">#</a> 使用自定义元素</h3> <p>我们可以在文档的任何地方使用<code>customElements.define</code>注册的自定义元素，即使是在自定义元素注册之前。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-tag</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-tag</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>或者：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">MyTag</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">&quot;my-tag&quot;</span><span class="token punctuation">,</span> MyTag<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 方式一：</span>
<span class="token keyword">var</span> tag <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'my-tag'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 方式二：</span>
<span class="token keyword">var</span> tag <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="元素提升"><a href="#元素提升" aria-hidden="true" class="header-anchor">#</a> 元素提升</h3> <p>浏览器是如何解析非标准的标签的？为什么对非标准的标签，浏览器不会报错？</p> <blockquote><p>HTML规范：<br>
非规范定义的元素必须使用 <em>HTMLUnknownElement</em> 接口。</p></blockquote> <p>我们在页面中声明一个 <code>&lt;myTag&gt;</code>标签，由于它是非标准标签，所以会继承 <code>HTMLUnknownElement</code>。</p> <p>对于自定义元素，情况有所不同。 拥有合法元素名称的自定义元素继承自<code>HTMLElement</code>。<br>
对于不支持自定义元素的浏览器，拥有合法元素名称的标签，仍然继承<code>HTMLUnknownElement</code>。</p> <h3 id="扩展内置元素特性"><a href="#扩展内置元素特性" aria-hidden="true" class="header-anchor">#</a> 扩展内置元素特性</h3> <p>在创建自定义元素时，置顶所需的扩展的元素，使用时，在内置元素上声明<code>is</code>属性指定自定义元素名称：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">CustomButton</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLButtonElement</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">&quot;custom-button&quot;</span><span class="token punctuation">,</span> CustomButton<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token keyword">extends</span><span class="token punctuation">:</span> <span class="token string">'button'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">is</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>custom-button<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="自定义元素样式"><a href="#自定义元素样式" aria-hidden="true" class="header-anchor">#</a> 自定义元素样式</h3> <p>自定义元素和内置元素一样，可以使用CSS各类选择器定义样式。</p> <p>自定义元素规范还提出了一个新的CSS伪类<code>:unresolved</code>。在浏览器调用你的<code>createdCallback()</code> 之前，这个伪类可以匹配到未完成元素提升的自定义元素。</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">custom-button</span><span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> opacity 300ms<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">custom-button:unresolved</span><span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>:unresolved 不能用于继承自HTMLUnkownElement的元素。</p></blockquote> <h3 id="浏览器支持"><a href="#浏览器支持" aria-hidden="true" class="header-anchor">#</a> 浏览器支持</h3> <p><code>Chrome</code>和<code>Opera</code>默认支持custom elements。<code>Firefox</code>计划在60/61的版本中默认支持自定义元素。<code>Safair</code>目前不支持自定义元素对内置元素的扩展。<code>Edge</code>在实现中。</p> <h3 id="补充内容：document-registerelement"><a href="#补充内容：document-registerelement" aria-hidden="true" class="header-anchor">#</a> 补充内容：<code>document.registerElement</code></h3> <p>使用<code>document.registerElement()</code> 创建自定义元素</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> MyTag <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">registerElement</span><span class="token punctuation">(</span><span class="token string">'my-tag'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>添加自定义元素特性：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> proto <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>HTMLElement<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
proto<span class="token punctuation">.</span>hello <span class="token operator">=</span> <span class="token string">'hello'</span><span class="token punctuation">;</span>
proto<span class="token punctuation">.</span><span class="token function-variable function">sayHello</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>hello<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> MyTag <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">registerElement</span><span class="token punctuation">(</span><span class="token string">'my-tag'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    prototype<span class="token punctuation">:</span> proto
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>扩展原生元素特性</p> <p><code>document.registerElement()</code> 的第二个参数还允许我们为扩展原生素的特性。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> MyButton <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">registerElement</span><span class="token punctuation">(</span><span class="token string">'my-button'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    extend<span class="token punctuation">:</span> <span class="token string">'button'</span><span class="token punctuation">,</span>
    prototpye<span class="token punctuation">:</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>HTMLButtonElement<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">is</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>my-button<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>生命周期以及回调方法</p> <ol><li>createdCallback(): 元素创建后回调。</li> <li>attachCallback(): 元素附加到文档后调用。</li> <li>detachCallback(): 元素从文档移除后调用。</li> <li>attributeChangedCallback(): 元素任意属性变化后调用。</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> myTagProto <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>HTMLElement<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>

myTagProto<span class="token punctuation">.</span><span class="token function-variable function">createdCallback</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 元素创建后回调。</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'我被创建了'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> MyTag <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">registerElement</span><span class="token punctuation">(</span><span class="token string">'my-tag'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    prototype<span class="token punctuation">:</span> myTagProto
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="结语"><a href="#结语" aria-hidden="true" class="header-anchor">#</a> 结语</h3> <p>自定义元素作为 <code>webComponent</code> 规范中的一部分，为web应用开发提供了更多的可能性，配合<code>webComponent</code> 规范的其他内容，可以为web开发者提供更强大的能力。</p></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/WebComponent/shadowDOM.html" class="prev">
          WebComponent—— shadow DOM
        </a></span> <span class="next"><a href="/Jenkins.html">
          Jenkins 使用
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/6.b5882f64.js" defer></script><script src="/assets/js/app.3ce050ba.js" defer></script>
  </body>
</html>
