(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{210:function(s,a,t){"use strict";t.r(a);var n=t(4),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[t("a",{attrs:{href:"https://jenkins.io/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Jenkins"),t("OutboundLink")],1),s._v(" 是一款功能强大的应用程序，允许持续集成和持续交付项目。这里记录一些 Jenkins 使用的方法。")]),s._v(" "),t("p",[t("em",[s._v("以下基于 "),t("code",[s._v("CentOS")]),s._v(" 系统。")])]),s._v(" "),t("h3",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),t("p",[s._v("安装详见 官网 "),t("a",{attrs:{href:"https://jenkins.io/download/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Jenkins 安装"),t("OutboundLink")],1),s._v(" 流程，各个系统如何安装均有说明。")]),s._v(" "),t("p",[s._v("环境依赖： "),t("code",[s._v("java")])]),s._v(" "),t("p",[s._v("CentOS 下安装：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat/jenkins.repo\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" --import https://pkg.jenkins.io/redhat/jenkins.io.key\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" jenkins\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[t("strong",[s._v("默认安装目录")]),s._v(" : "),t("code",[s._v("/var/lib/jenkins")])]),s._v(" "),t("li",[t("strong",[s._v("默认日志目录")]),s._v(" ："),t("code",[s._v("/var/log/jenkins")])]),s._v(" "),t("li",[t("strong",[s._v("默认缓存目录")]),s._v(" : "),t("code",[s._v("/var/cache/jenkins")])]),s._v(" "),t("li",[t("strong",[s._v("默认admin密码文件")]),s._v(" : "),t("code",[s._v("/var/lib/jenkins/secrets/initialAdminPassword")])]),s._v(" "),t("li",[t("strong",[s._v("配置文件")]),s._v(" : "),t("code",[s._v("/etc/sysconfig/jenkins")])])]),s._v(" "),t("h3",{attrs:{id:"运行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#运行"}},[s._v("#")]),s._v(" 运行")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动 Jenkins")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" jenkins start\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启 Jenkins")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" jenkins restart\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止 Jenkins")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" jenkins stop\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("默认运行在 "),t("code",[s._v("8080")]),s._v(" 端口， 本机可通过 "),t("code",[s._v("localhost:8080")]),s._v(" 访问。")]),s._v(" "),t("h3",{attrs:{id:"卸载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#卸载"}},[s._v("#")]),s._v(" 卸载")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" jenkiins stop\nyum clean all\nyum remove jenkins\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf /var/lib/jenkins\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf /var/cache/jenkins\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf /var/log/jenkins\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h3",{attrs:{id:"修改端口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改端口"}},[s._v("#")]),s._v(" 修改端口")]),s._v(" "),t("ol",[t("li",[s._v("打开"),t("code",[s._v("Jenkins")]),s._v(" 配置文件")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/sysconfig/jenkins\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("修改 "),t("code",[s._v("$HTTP_PORT")])])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$HTTP_PORT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8080"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"获取root用户权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#获取root用户权限"}},[s._v("#")]),s._v(" 获取root用户权限")]),s._v(" "),t("ol",[t("li",[s._v("打开"),t("code",[s._v("Jenkins")]),s._v(" 配置文件")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/sysconfig/jenkins\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("修改 "),t("code",[s._v("HTTP_PORT")])])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JENKINS_USER")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("修改"),t("code",[s._v("Jenkins")]),s._v(" 相关目录权限")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R root:root /var/lib/jenkins\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R root:root /var/log/jenkins\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R root:root /var/cache/jenkins\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ol",{attrs:{start:"4"}},[t("li",[s._v("重启"),t("code",[s._v("Jenkins")]),s._v("并验证")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" jenkins restart\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" jenkins\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 若显示为root用户，则表示修改完成")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"开机自启"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开机自启"}},[s._v("#")]),s._v(" 开机自启")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" jenkins on\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"全局工具配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#全局工具配置"}},[s._v("#")]),s._v(" 全局工具配置")]),s._v(" "),t("p",[s._v("全局工具配置可以 配置相关工具如"),t("code",[s._v("Maven")]),s._v("、"),t("code",[s._v("GIT")]),s._v("等工具的路径、或者安装新的不同版本的工具。")]),s._v(" "),t("p",[s._v("配置该设置需要获取 "),t("code",[s._v("admin")]),s._v("权限，进入"),t("code",[s._v("系统管理 > 全局工具配置")]),s._v("。")]),s._v(" "),t("p",[s._v("如：配置全局 GIT：")]),s._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:"/images/jenkins_globalconfig.png",alt:"全局配置git"}}),s._v(" "),t("h3",{attrs:{id:"用户管理以及用户权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#用户管理以及用户权限"}},[s._v("#")]),s._v(" 用户管理以及用户权限")]),s._v(" "),t("ul",[t("li",[s._v("使用"),t("code",[s._v("admin")]),s._v("权限的账号，进入"),t("code",[s._v("系统管理 > 用户管理")]),s._v(", 可以添加/修改/删除 用户。")]),s._v(" "),t("li",[s._v("进入"),t("code",[s._v("系统管理 > 全局安全配置")]),s._v(" 中，勾选 "),t("strong",[s._v("启用安全")]),s._v("。访问控制选择 "),t("strong",[s._v("Jenkins专有用户数据库")]),s._v("，使用 "),t("strong",[s._v("项目矩阵授权策略")]),s._v(", 可以为每个用户分配全局权限。")]),s._v(" "),t("li",[s._v("进入项目配置中，权限 "),t("strong",[s._v("启用项目安全")]),s._v(" 可以单独为该项目分配用户权限。 从而确保每个项目的安全性。")])]),s._v(" "),t("h3",{attrs:{id:"git-parameter"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#git-parameter"}},[s._v("#")]),s._v(" Git Parameter")]),s._v(" "),t("p",[s._v("为项目添加 "),t("code",[s._v("git")]),s._v("分支/标签选择参数构建配置，从而方便通过不同分支构建项目。")]),s._v(" "),t("p",[s._v("项目配置：\n"),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:"https://wiki.jenkins-ci.org/download/attachments/58917601/image2018-9-20_22-0-7.png?version=1&modificationDate=1537473611000&api=v2",alt:"Git Parameter"}})]),s._v(" "),t("p",[s._v("参数化构建：\n"),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:"https://wiki.jenkins-ci.org/download/attachments/58917601/image2018-9-20_22-2-47.png?version=1&modificationDate=1537473769000&api=v2",alt:"build width paramters form"}})]),s._v(" "),t("p",[s._v("基础"),t("code",[s._v("pipeline")]),s._v("配置：")]),s._v(" "),t("div",{staticClass:"language-groovy line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-groovy"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Using git without checkout ")]),s._v("\npipeline "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  agent any\n  parameters "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    gitParameter branchFilter"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'origin/(.*)'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" defaultValue"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'master'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'BRANCH'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'PT_BRANCH'")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  stages "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("stage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Example'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      steps "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        git branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string gstring"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token expression"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("$")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("params"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("BRANCH"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),s._v('"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" url"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://github.com/jenkinsci/git-parameter-plugin.git'")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[t("a",{attrs:{href:"https://plugins.jenkins.io/git-parameter",target:"_blank",rel:"noopener noreferrer"}},[s._v("阅读插件原文（git-parameter）"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"其他"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[s._v("#")]),s._v(" 其他")]),s._v(" "),t("p",[s._v("相关工具以及项目配置，都只是小问题而已...")])])}),[],!1,null,null,null);a.default=e.exports}}]);